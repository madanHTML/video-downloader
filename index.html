<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Universal Downloader</title>
<style>
body{font-family:Arial,Helvetica,sans-serif;background:#f4f6f8;margin:0;display:flex;align-items:center;justify-content:center;height:100vh}
.card{background:#fff;padding:24px;border-radius:10px;box-shadow:0 6px 24px rgba(0,0,0,0.08);width:420px}
h1{font-size:20px;margin:0 0 12px}
input,select,button{width:100%;padding:10px;margin-top:8px;border-radius:6px;border:1px solid #ddd;box-sizing:border-box}
button{background:#1f8ef1;color:#fff;border:none;cursor:pointer}
.small{font-size:12px;color:#666;margin-top:8px}
</style>
</head>
<body>
<div class="card">
  <h1>Universal Downloader</h1>
  <label>Video URL</label>
  <input id="url" placeholder="Paste YouTube/Vimeo link" />
  <label>Quality</label>
  <select id="quality">
    <option value="360">360p</option>
    <option value="480">480p</option>
    <option value="720">720p</option>
    <option value="1080" selected>1080p</option>
    <option value="1440">1440p (2K)</option>
    <option value="2160">2160p (4K)</option>
    <option value="4320">4320p (8K)</option>
  </select>
  <button id="download">Download</button>
  <div class="small">Downloads saved to backend/downloads/. Make sure <code>yt-dlp</code> is installed on your machine.</div>
  <div id="log" class="small"></div>
</div>
<script>
const btn = document.getElementById('download');
const log = document.getElementById('log');
btn.addEventListener('click', async () => {
  const url = document.getElementById('url').value.trim();
  const quality = document.getElementById('quality').value;
  if(!url){ alert('Please enter a URL'); return; }
  btn.disabled = true; btn.textContent='Processing...'; log.textContent='';
  try{
    const res = await fetch('/download', {
      method:'POST',
      headers:{'Content-Type':'application/json'},
      body: JSON.stringify({url, quality})
    });
    const data = await res.json();
    if(data.success) { alert(data.message || 'Download started'); log.textContent = data.message || ''; }
    else { alert('Error: '+(data.error||data.message)); log.textContent = data.error||data.message; }
  }catch(e){
    alert('Request failed: '+e.message);
    log.textContent = e.message;
  } finally {
    btn.disabled=false; btn.textContent='Download';
  }
});
</script>
</body>
</html>
